{"version":3,"file":"root-v1.js","sourceRoot":"","sources":["../../../../src/remix/codemods/root-v1.ts"],"names":[],"mappings":";AAAA,4DAA4D;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAE5D,2CAA6B;AAE7B,+EAA+E;AAC/E,6DAAmC;AACnC,kDAA0B;AAE1B,kFAAkF;AAClF,uCAA+C;AAC/C,+CAAkD;AAE3C,KAAK,UAAU,qBAAqB,CACzC,YAAoB;IAEpB,IAAI;QACF,MAAM,YAAY,GAAG,MAAM,IAAA,mBAAQ,EACjC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,KAAK,EAAE,YAAY,CAAC,CAC9C,CAAC;QAEF,IAAA,+BAAiB,EAAC,YAAY,EAAE,YAAY,CAAC,CAAC;QAE9C,MAAM,IAAA,oBAAS,EACb,YAAY,CAAC,IAAI,EACjB,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,KAAK,EAAE,YAAY,CAAC,CAC9C,CAAC;KACH;IAAC,OAAO,CAAU,EAAE;QACnB,sCAAsC;QACtC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;QACjB,iBAAK,CAAC,GAAG,CAAC,IAAI,CACZ,eAAK,CAAC,MAAM,CACV,mCAAmC,eAAK,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE,CAC9D,CACF,CAAC;QACF,iBAAK,CAAC,GAAG,CAAC,IAAI,CACZ,8CAA8C,eAAK,CAAC,IAAI,CACtD,YAAY,CACb,KAAK,eAAK,CAAC,GAAG,CAAC,yCAAyC,CAAC,IAAI,CAC/D,CAAC;KACH;AACH,CAAC;AA5BD,sDA4BC","sourcesContent":["/* eslint-disable @typescript-eslint/no-unsafe-assignment */\n\nimport * as path from 'path';\n\n// @ts-expect-error - clack is ESM and TS complains about that. It works though\nimport clack from '@clack/prompts';\nimport chalk from 'chalk';\n\n// @ts-expect-error - magicast is ESM and TS complains about that. It works though\nimport { loadFile, writeFile } from 'magicast';\nimport { wrapAppWithSentry } from './root-common';\n\nexport async function instrumentRootRouteV1(\n  rootFileName: string,\n): Promise<void> {\n  try {\n    const rootRouteAst = await loadFile(\n      path.join(process.cwd(), 'app', rootFileName),\n    );\n\n    wrapAppWithSentry(rootRouteAst, rootFileName);\n\n    await writeFile(\n      rootRouteAst.$ast,\n      path.join(process.cwd(), 'app', rootFileName),\n    );\n  } catch (e: unknown) {\n    // eslint-disable-next-line no-console\n    console.error(e);\n    clack.log.warn(\n      chalk.yellow(\n        `Something went wrong writing to ${chalk.bold(rootFileName)}`,\n      ),\n    );\n    clack.log.info(\n      `Please put the following code snippet into ${chalk.bold(\n        rootFileName,\n      )}: ${chalk.dim('You probably have to clean it up a bit.')}\\n`,\n    );\n  }\n}\n"]}