{"version":3,"file":"sourcemaps-wizard.js","sourceRoot":"","sources":["../../../src/sourcemaps/sourcemaps-wizard.ts"],"names":[],"mappings":"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","sourcesContent":["// @ts-expect-error - clack is ESM and TS complains about that. It works though\nimport clack from '@clack/prompts';\nimport * as Sentry from '@sentry/node';\nimport chalk from 'chalk';\n\nimport { traceStep, withTelemetry } from '../telemetry';\nimport {\n  abort,\n  abortIfCancelled,\n  confirmContinueIfNoOrDirtyGitRepo,\n  getOrAskForProjectData,\n  getPackageManager,\n  printWelcome,\n  SENTRY_CLI_RC_FILE,\n  SENTRY_DOT_ENV_FILE,\n} from '../utils/clack';\nimport { NPM } from '../utils/package-manager';\nimport type { WizardOptions } from '../utils/types';\nimport { getIssueStreamUrl } from '../utils/url';\nimport { isUnicodeSupported } from '../utils/vendor/is-unicorn-supported';\nimport { configureAngularSourcemapGenerationFlow } from './tools/angular';\nimport { configureCRASourcemapGenerationFlow } from './tools/create-react-app';\nimport { configureEsbuildPlugin } from './tools/esbuild';\nimport { configureRollupPlugin } from './tools/rollup';\nimport { configureSentryCLI, setupNpmScriptInCI } from './tools/sentry-cli';\nimport { configureTscSourcemapGenerationFlow } from './tools/tsc';\nimport type { SourceMapUploadToolConfigurationOptions } from './tools/types';\nimport { configureVitePlugin } from './tools/vite';\nimport { configureWebPackPlugin } from './tools/webpack';\nimport type { SupportedTools } from './utils/detect-tool';\nimport { detectUsedTool } from './utils/detect-tool';\nimport { checkIfMoreSuitableWizardExistsAndAskForRedirect } from './utils/other-wizards';\nimport { ensureMinimumSdkVersionIsInstalled } from './utils/sdk-version';\nimport { sep } from 'path';\n\nexport async function runSourcemapsWizard(\n  options: WizardOptions,\n  preSelectedTool?: SupportedTools,\n): Promise<void> {\n  return withTelemetry(\n    {\n      enabled: options.telemetryEnabled,\n      integration: 'sourcemaps',\n      wizardOptions: options,\n    },\n    () => runSourcemapsWizardWithTelemetry(options, preSelectedTool),\n  );\n}\n\nasync function runSourcemapsWizardWithTelemetry(\n  options: WizardOptions,\n  preSelectedTool?: SupportedTools,\n): Promise<void> {\n  if (!preSelectedTool) {\n    printWelcome({\n      wizardName: 'Sentry Source Maps Upload Configuration Wizard',\n      message: `This wizard will help you upload source maps to Sentry as part of your build.\nThank you for using Sentry :)${\n        options.telemetryEnabled\n          ? `\n\n(This setup wizard sends telemetry data and crash reports to Sentry.\nYou can turn this off by running the wizard with the '--disable-telemetry' flag.)`\n          : ''\n      }`,\n      promoCode: options.promoCode,\n    });\n  }\n\n  const moreSuitableWizard = await traceStep(\n    'check-framework-wizard',\n    checkIfMoreSuitableWizardExistsAndAskForRedirect,\n  );\n  if (moreSuitableWizard) {\n    await traceStep('run-framework-wizard', () => moreSuitableWizard(options));\n    return;\n  }\n\n  if (!preSelectedTool) {\n    await confirmContinueIfNoOrDirtyGitRepo({\n      ignoreGitChanges: options.ignoreGitChanges,\n      cwd: undefined,\n    });\n  }\n\n  await traceStep('check-sdk-version', ensureMinimumSdkVersionIsInstalled);\n\n  const { selfHosted, selectedProject, sentryUrl, authToken } =\n    await getOrAskForProjectData(options);\n\n  const wizardOptionsWithPreSelectedProject = {\n    ...options,\n    preSelectedProject: {\n      project: selectedProject,\n      authToken,\n      selfHosted,\n    },\n  };\n\n  const selectedTool =\n    preSelectedTool || (await traceStep('select-tool', askForUsedBundlerTool));\n\n  Sentry.setTag('selected-tool', selectedTool);\n\n  if (selectedTool === 'no-tool') {\n    clack.log.info(\n      \"No Problem! But in this case, there's nothing to configure :)\",\n    );\n    await abort('Exiting, have a great day!', 0);\n    return;\n  }\n\n  await traceStep('tool-setup', () =>\n    startToolSetupFlow(\n      selectedTool,\n      {\n        orgSlug: selectedProject.organization.slug,\n        projectSlug: selectedProject.slug,\n        selfHosted,\n        url: sentryUrl,\n        authToken,\n      },\n      wizardOptionsWithPreSelectedProject,\n      preSelectedTool,\n    ),\n  );\n\n  await traceStep('ci-setup', () =>\n    setupCI(selectedTool, authToken, options.comingFrom),\n  );\n\n  if (!preSelectedTool) {\n    await traceStep('outro', () =>\n      printOutro(\n        sentryUrl,\n        selectedProject.organization.slug,\n        selectedProject.id,\n      ),\n    );\n  }\n}\n\nasync function askForUsedBundlerTool(): Promise<SupportedTools> {\n  const selectedTool = await abortIfCancelled(\n    clack.select({\n      message: 'Which framework, bundler or build tool are you using?',\n      options: [\n        {\n          label: 'Angular',\n          value: 'angular',\n          hint: 'Select this option if you are using Angular.',\n        },\n        {\n          label: 'Create React App',\n          value: 'create-react-app',\n          hint: 'Select this option if you set up your app with Create React App.',\n        },\n        {\n          label: 'Webpack',\n          value: 'webpack',\n          hint: 'Select this if you are using Webpack and you have access to your Webpack config.',\n        },\n        {\n          label: 'Vite',\n          value: 'vite',\n          hint: 'Select this if you are using Vite and you have access to your Vite config.',\n        },\n        {\n          label: 'esbuild',\n          value: 'esbuild',\n          hint: 'Select this if you are using esbuild and you have access to your esbuild config.',\n        },\n        {\n          label: 'Rollup',\n          value: 'rollup',\n          hint: 'Select this if you are using Rollup and you have access to your Rollup config.',\n        },\n        {\n          label: 'tsc',\n          value: 'tsc',\n          hint: 'Configure source maps when using tsc as build tool',\n        },\n        {\n          label: 'I use another tool',\n          value: 'sentry-cli',\n          hint: 'This will configure source maps upload for you using sentry-cli',\n        },\n        {\n          label: \"I don't minify, transpile or bundle my code\",\n          value: 'no-tool',\n          hint: 'This will exit the wizard',\n        },\n      ],\n      initialValue: await detectUsedTool(),\n    }),\n  );\n\n  return selectedTool;\n}\n\nasync function startToolSetupFlow(\n  selectedTool: SupportedTools,\n  options: SourceMapUploadToolConfigurationOptions,\n  wizardOptions: WizardOptions,\n  preSelectedTool?: SupportedTools,\n): Promise<void> {\n  switch (selectedTool) {\n    case 'webpack':\n      await configureWebPackPlugin(options);\n      break;\n    case 'vite':\n      await configureVitePlugin(options);\n      break;\n    case 'esbuild':\n      await configureEsbuildPlugin(options);\n      break;\n    case 'rollup':\n      await configureRollupPlugin(options);\n      break;\n    case 'tsc':\n      await configureSentryCLI(options, configureTscSourcemapGenerationFlow);\n      break;\n    case 'create-react-app':\n      await configureSentryCLI(options, configureCRASourcemapGenerationFlow);\n      break;\n    case 'angular':\n      await configureSentryCLI(\n        { ...options, defaultArtifactPath: `.${sep}dist` },\n        configureAngularSourcemapGenerationFlow,\n        preSelectedTool === 'angular',\n      );\n      break;\n    default:\n      await configureSentryCLI(options);\n      break;\n  }\n}\nexport async function setupCI(\n  selectedTool: SupportedTools,\n  authToken: string,\n  comingFrom: WizardOptions['comingFrom'],\n) {\n  if (comingFrom === 'vercel') {\n    clack.log.info(\n      'Sentry Vercel integration is already configured. Skipping CI setup.',\n    );\n    Sentry.setTag('using-ci', true);\n  } else {\n    await traceStep('configure-ci', () => configureCI(selectedTool, authToken));\n  }\n}\n\nexport async function configureCI(\n  selectedTool: SupportedTools,\n  authToken: string,\n): Promise<void> {\n  const isUsingCI = await abortIfCancelled(\n    clack.select({\n      message: `Are you using a CI/CD tool to build and deploy your application?`,\n      options: [\n        {\n          label: 'Yes',\n          hint: 'I use a tool like GitHub Actions, GitLab, CircleCI, TravisCI, Jenkins, Vercel, ...',\n          value: true,\n        },\n        {\n          label: 'No',\n          hint: 'I build and deploy my application manually',\n          value: false,\n        },\n      ],\n      initialValue: true,\n    }),\n  );\n\n  Sentry.setTag('using-ci', isUsingCI);\n\n  const isCliBasedFlowTool = [\n    'sentry-cli',\n    'tsc',\n    'angular',\n    'create-react-app',\n  ].includes(selectedTool);\n\n  const authTokenFile = isCliBasedFlowTool\n    ? SENTRY_CLI_RC_FILE\n    : SENTRY_DOT_ENV_FILE;\n\n  if (!isUsingCI) {\n    clack.log.info(\n      `No Problem! Just make sure that the Sentry auth token from ${chalk.cyan(\n        authTokenFile,\n      )} is available whenever you build and deploy your app.`,\n    );\n    return;\n  }\n\n  if (isCliBasedFlowTool) {\n    await traceStep('ci-npm-script-setup', setupNpmScriptInCI);\n  }\n\n  await traceStep('ci-auth-token-setup', () => setupAuthTokenInCI(authToken));\n}\n\nasync function setupAuthTokenInCI(authToken: string) {\n  clack.log.step(\n    'Add the Sentry authentication token as an environment variable to your CI setup:',\n  );\n\n  // Intentially logging directly to console here so that the code can be copied/pasted directly\n  // eslint-disable-next-line no-console\n  console.log(\n    chalk.greenBright(`\nSENTRY_AUTH_TOKEN=${authToken}\n`),\n  );\n\n  clack.log.warn(\n    chalk.yellow('DO NOT commit this auth token to your repository!'),\n  );\n\n  const addedEnvVarToCI = await abortIfCancelled(\n    clack.select({\n      message: 'Did you configure CI as shown above?',\n      options: [\n        { label: 'Yes, continue!', value: true },\n        {\n          label: \"I'll do it later...\",\n          value: false,\n          hint: chalk.yellow(\n            'You need to set the auth token to upload source maps in CI',\n          ),\n        },\n      ],\n      initialValue: true,\n    }),\n  );\n\n  Sentry.setTag('added-env-var-to-ci', addedEnvVarToCI);\n\n  if (!addedEnvVarToCI) {\n    clack.log.info(\"Don't forget! :)\");\n  }\n}\n\nasync function printOutro(\n  url: string,\n  orgSlug: string,\n  projectId: string,\n): Promise<void> {\n  const packageManager = await getPackageManager(NPM);\n\n  const issueStreamUrl = getIssueStreamUrl({ url, orgSlug, projectId });\n\n  const arrow = isUnicodeSupported() ? '→' : '->';\n\n  clack.outro(`${chalk.green(\"That's it - everything is set up!\")}\n\n   ${chalk.cyan(`Test and validate your setup locally with the following Steps:\n\n   1. Build your application in ${chalk.bold('production mode')}.\n      ${chalk.gray(\n        `${arrow} For example, run ${chalk.bold(packageManager.buildCommand)}.`,\n      )}\n      ${chalk.gray(\n        `${arrow} You should see source map upload logs in your console.`,\n      )}\n   2. Run your application and throw a test error.\n      ${chalk.gray(`${arrow} The error should appear in Sentry:`)}\n      ${chalk.gray(`${arrow} ${issueStreamUrl}`)}\n   3. Open the error in Sentry and verify that it's source-mapped.\n      ${chalk.gray(\n        `${arrow} The stack trace should show your original source code.`,\n      )}\n   `)}\n   ${chalk.dim(\n     `If you encounter any issues, please refer to the Troubleshooting Guide:\n   https://docs.sentry.io/platforms/javascript/sourcemaps/troubleshooting_js\n\n   If the guide doesn't help or you encounter a bug, please let us know:\n   https://github.com/getsentry/sentry-javascript/issues`,\n   )}\n`);\n}\n"]}