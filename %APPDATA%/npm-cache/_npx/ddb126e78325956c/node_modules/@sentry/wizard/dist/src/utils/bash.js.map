{"version":3,"file":"bash.js","sourceRoot":"","sources":["../../../src/utils/bash.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,6DAA+C;AAC/C,6CAA+B;AAC/B,uCAAyB;AAEzB,SAAgB,YAAY;IAC1B,IAAI;QACF,aAAa,CAAC,QAAQ,CAAC,sBAAsB,CAAC,CAAC;QAC/C,OAAO,IAAI,CAAC;KACb;IAAC,OAAO,CAAC,EAAE;QACV,OAAO,KAAK,CAAC;KACd;AACH,CAAC;AAPD,oCAOC;AAEM,KAAK,UAAU,gBAAgB;IACpC,MAAM,SAAS,GAAG,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,MAAM,EAAE,EAAE;QAChD,MAAM,IAAI,GAAG,EAAE,CAAC,iBAAiB,CAAC,eAAe,CAAC,CAAC;QACnD,KAAK,CAAC,GAAG,CAAC,4BAA4B,EAAE,CAAC,QAAQ,EAAE,EAAE;YACnD,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACpB,IAAI,CAAC,EAAE,CAAC,QAAQ,EAAE,GAAG,EAAE;gBACrB,IAAI,CAAC,KAAK,EAAE,CAAC;gBACb,IAAI;oBACF,aAAa,CAAC,QAAQ,CAAC,sBAAsB,CAAC,CAAC;iBAChD;gBAAC,OAAO,CAAC,EAAE;oBACV,MAAM,CAAC,CAAC,CAAC,CAAC;oBACV,OAAO;iBACR;gBACD,EAAE,CAAC,UAAU,CAAC,eAAe,CAAC,CAAC;gBAC/B,OAAO,CAAC,IAAI,CAAC,CAAC;YAChB,CAAC,CAAC,CAAC;YAEH,IAAI,CAAC,EAAE,CAAC,OAAO,EAAE,CAAC,GAAG,EAAE,EAAE;gBACvB,EAAE,CAAC,UAAU,CAAC,eAAe,CAAC,CAAC;gBAC/B,MAAM,CAAC,GAAG,CAAC,CAAC;YACd,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,MAAM,SAAS,CAAC;AAClB,CAAC;AAzBD,4CAyBC;AAED,SAAgB,WAAW,CAAC,OAAe;IACzC,MAAM,MAAM,GAAG,aAAa,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;IAC/C,OAAO,MAAM,CAAC,QAAQ,EAAE,CAAC;AAC3B,CAAC;AAHD,kCAGC;AAED,SAAgB,OAAO,CAAC,OAAe;IACrC,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,MAAM,EAAE,EAAE;QACrC,aAAa,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC,KAAK,EAAE,MAAM,EAAE,CAAC,EAAE,EAAE;YAC/C,IAAI,KAAK,EAAE;gBACT,MAAM,CAAC,KAAK,CAAC,CAAC;gBACd,OAAO;aACR;YAED,OAAO,CAAC,MAAM,CAAC,CAAC;QAClB,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;AACL,CAAC;AAXD,0BAWC","sourcesContent":["import * as child_process from 'child_process';\nimport * as https from 'https';\nimport * as fs from 'fs';\n\nexport function hasSentryCLI(): boolean {\n  try {\n    child_process.execSync('sentry-cli --version');\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nexport async function installSentryCLI(): Promise<void> {\n  const httpAsync = new Promise((resolve, reject) => {\n    const file = fs.createWriteStream('installcli.sh');\n    https.get('https://sentry.io/get-cli/', (response) => {\n      response.pipe(file);\n      file.on('finish', () => {\n        file.close();\n        try {\n          child_process.execSync('bash ./installcli.sh');\n        } catch (e) {\n          reject(e);\n          return;\n        }\n        fs.unlinkSync('installcli.sh');\n        resolve(null);\n      });\n\n      file.on('error', (err) => {\n        fs.unlinkSync('installcli.sh');\n        reject(err);\n      });\n    });\n  });\n\n  await httpAsync;\n}\n\nexport function executeSync(command: string): string {\n  const output = child_process.execSync(command);\n  return output.toString();\n}\n\nexport function execute(command: string): Promise<string> {\n  return new Promise((resolve, reject) => {\n    child_process.exec(command, (error, stdout, _) => {\n      if (error) {\n        reject(error);\n        return;\n      }\n\n      resolve(stdout);\n    });\n  });\n}\n"]}