{"version":3,"file":"utils.js","sourceRoot":"","sources":["../../../src/sveltekit/utils.ts"],"names":[],"mappings":";;;AAAA,mCAAwC;AAExC,SAAgB,mBAAmB,CACjC,OAA2B;IAE3B,IAAI,CAAC,OAAO,EAAE;QACZ,OAAO,MAAM,CAAC;KACf;IAED,MAAM,MAAM,GAAG,IAAA,mBAAU,EAAC,OAAO,CAAC,CAAC;IACnC,IAAI,CAAC,MAAM,EAAE;QACX,OAAO,SAAS,CAAC;KAClB;IAED,IAAI,IAAA,WAAE,EAAC,MAAM,EAAE,OAAO,CAAC,EAAE;QACvB,OAAO,KAAK,CAAC;KACd;SAAM,IAAI,IAAA,WAAE,EAAC,MAAM,EAAE,QAAQ,CAAC,EAAE;QAC/B,OAAO,iBAAiB,CAAC;KAC1B;SAAM;QACL,yEAAyE;QACzE,0EAA0E;QAC1E,6CAA6C;QAC7C,OAAO,UAAU,CAAC;KACnB;AACH,CAAC;AAtBD,kDAsBC;AAED,SAAgB,sBAAsB,CACpC,OAA2B;IAE3B,IAAI,CAAC,OAAO,EAAE;QACZ,OAAO,MAAM,CAAC;KACf;IAED,MAAM,MAAM,GAAG,IAAA,mBAAU,EAAC,OAAO,CAAC,CAAC;IACnC,IAAI,CAAC,MAAM,EAAE;QACX,OAAO,SAAS,CAAC;KAClB;IAED,IAAI,IAAA,WAAE,EAAC,MAAM,EAAE,OAAO,CAAC,EAAE;QACvB,OAAO,QAAQ,CAAC;KACjB;IACD,IAAI,IAAA,WAAE,EAAC,MAAM,EAAE,OAAO,CAAC,EAAE;QACvB,OAAO,KAAK,CAAC;KACd;IACD,IAAI,IAAA,WAAE,EAAC,MAAM,EAAE,OAAO,CAAC,EAAE;QACvB,OAAO,KAAK,CAAC;KACd;IACD,uDAAuD;IACvD,OAAO,MAAM,CAAC;AAChB,CAAC;AAvBD,wDAuBC","sourcesContent":["import { lt, minVersion } from 'semver';\n\nexport function getKitVersionBucket(\n  version: string | undefined,\n): 'none' | 'invalid' | '0.x' | '>=1.0.0 <1.24.0' | '>=1.24.0' {\n  if (!version) {\n    return 'none';\n  }\n\n  const minVer = minVersion(version);\n  if (!minVer) {\n    return 'invalid';\n  }\n\n  if (lt(minVer, '1.0.0')) {\n    return '0.x';\n  } else if (lt(minVer, '1.24.0')) {\n    return '>=1.0.0 <1.24.0';\n  } else {\n    // This is the version when the client-side invalidation fix was released\n    // https://github.com/sveltejs/kit/releases/tag/%40sveltejs%2Fkit%401.24.0\n    // https://github.com/sveltejs/kit/pull/10576\n    return '>=1.24.0';\n  }\n}\n\nexport function getSvelteVersionBucket(\n  version: string | undefined,\n): 'none' | 'invalid' | '<3.0.0' | '3.x' | '4.x' | '>4.x' {\n  if (!version) {\n    return 'none';\n  }\n\n  const minVer = minVersion(version);\n  if (!minVer) {\n    return 'invalid';\n  }\n\n  if (lt(minVer, '3.0.0')) {\n    return '<3.0.0';\n  }\n  if (lt(minVer, '4.0.0')) {\n    return '3.x';\n  }\n  if (lt(minVer, '5.0.0')) {\n    return '4.x';\n  }\n  // Svelte 5 isn't released yet but it's being worked on\n  return '>4.x';\n}\n"]}